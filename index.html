08.26 05:37
指数
<！doctype 超文本标记语言>
<超文本标记语言 朗="zh-CN">
<头>
<meta charset="UTF-8">
<title>光遇 81 点地图</title>
<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="mobile-web-app-capable" content="yes">
<style>
*{边缘:0;填充:0;箱体尺寸:边框框}
超文本标记语言,身体{高度:100%;字体系列:-apple-系统,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",无衬线}
#地图{宽度:100%;高度:100%;背景:#000 无重复 中心/覆盖;过渡:背景 .4s}
#信息{
  位置:确定的;
  底部:0;左:0;正确的:0;
  背景:透明的;   /* ← 完全透明 */
  颜色：#fff；
  最大高度:60%;
  填充:12PX 16PX;
  改变:translateY(100%);
  过渡:改变 .3s;
  溢流y:自动}
#信息.显示{改变:translateY(0)}
#信息 H2{底边距:6PX}
#信息 UL{列表式:没有一个}
#信息 锂{边缘:4PX 0}
#返回{位置:确定的;顶端:12PX;左:12PX;背景:RGBA(0,0,0,.5);颜色：#fff；边境:没有一个;填充:6PX 10PX;边界半径:6PX;字体大小:14PX}
</style>
</头>
<body>
<div id="map"></div>
<button id="back">↩ 后退</button>
<div id="info">
  <h2 id="info-title"></h2>
  <p id="info-stats"></p>
  <ul id="info-list"></ul>
</div>
<script>
Const 积分=[
  {"ID":1,"名称":"遇境","机翼":0,"神龛":1,"祖先":0},
  {"ID":2,"名称":"云巢","机翼":0,"神龛":1,"祖先":0},
  {"ID":3,"名称":"服装商店","机翼":0,"神龛":0,"祖先":0},
  {"ID":4,"名称":"魔法商店","机翼":0,"神龛":0,"祖先":0},
  {"ID":5,"名称":"家具商店","机翼":0,"神龛":0,"祖先":0},
  {"ID":6,"名称":"公寓","机翼":0,"神龛":0,"祖先":0},
  {"ID":7,"名称":"晨岛","机翼":5,"神龛":4,"祖先":7},
  {"ID":8,"名称":"夜行石","机翼":0,"神龛":0,"祖先":4},
  {"ID":9,"名称":"预言山谷","机翼":0,"神龛":1,"祖先":0},
  {"ID":10,"名称":"湖水的试炼","机翼":1,"神龛":1,"祖先":0},
  {"ID":11,"名称":"土地的试炼","机翼":1,"神龛":1,"祖先":0},
  {"ID":12,"名称":"空气的试炼","机翼":1,"神龛":1,"祖先":0},
  {"ID":13,"名称":"火焰的试炼","机翼":1,"神龛":1,"祖先":0},
  {"ID":14,"名称":"晨岛神殿","机翼":1,"神龛":0,"祖先":0},
  {"ID":15,"名称":"云野大厅","机翼":1,"神龛":1,"祖先":0},
{"ID"：16，"名称"："蝴蝶平原"，"机翼"：2，"神龛"：1，"祖先"：2}，
{"ID"：17，"名称"："幽光山洞"，"机翼"：2，"神龛"：1，"祖先"：2}，
{"ID"：18，"名称"："云峰"，"机翼"：3，"神龛"：1，"祖先"：4}，
{"ID"：19，"名称"："仙乡"，"机翼"：3，"神龛"：1，"祖先"：4}，
{"ID"：20，"名称"："锦鲤池"，"机翼"：2，"神龛"：1，"祖先"：0}，
{"id"：21，"name"："云顶浮石"，"翼"：2，"神龛"：1，"祖先"：3}，
{"id"：22，"name"："中央神坛"，"翼"：1，"神龛"：1，"祖先"：1}，
{"id"：23，"name"："圣岛"，"翼"：8，"神龛"：1，"祖先"：6}，
{"id"：24，"name"："云野神殿"，"翼"：0，"神龛"：0，"祖先"：0}，
{"id"：25，"name"："雨林大厅"，"wing“”：0，“shrine”：1，“祖先”：0}，
{"id"：26，"name"："风行网道"，"翼"：1，"神龛"：1，"祖先"：4}，
{"id"：27，"name"："静谧庭院"，"翼"：2，"神龛"：1，"祖先"：3}，
{"id"：28，"name"："荧光森林"，"翼"：4，"神龛"：1，"祖先"：7}，
{"id"：29，"name"："密林遗迹"，"翼"：3，"神龛"：1，"祖先"：7}，
{"id"：30，"name"："大树屋"，"翼“”：2，“神社”：1，“祖先”：0}，
{"id"：31，"name"："秘密花园"，"翼“”：2，“神社”：1，“祖先”：0}，
{"id"：32，"name"："青鸟剧场"，"翼“”：1，“神社”：1，“祖先”：0}，
{"id"：33，"name"："地下溶洞"，"翼"：4，"神龛"：1，"祖先"：1}，
{"id"：34，"name"："雨林神殿"，"wing“”：0，“shrine”：1，“祖先”：0}，
{"id"：35，"name"："后花园"，"翼“”：1，“神社”：1，“祖先”：0}
];
Const points2=[
{"id"：36，"name"："霞谷大厅"，"翼“”：1，“神社”：1，“祖先”：0}，
{"id"：37，"name"："溜冰场"，"翼"：2，"神龛"：1，"祖先"：4}，
{"id"：38，"name"："霞光城"，"翼"：2，"神龛"：1，"祖先"：3}，
{"id"：39，"name"："飞行赛道"，"翼“”：2，“神社”：1，“祖先”：0}，
{"id"：40，"name"："滑雪赛道"，"翼“”：1，“神社”：1，“祖先”：0}，
{"id"：41，"name"："落日竞技场"，"翼"：2，"神龛"：1，"祖先"：3}，
{"id"：42，"name"："圆梦村"，"翼"：3，"神龛"：2，"祖先"：4}，
{"id"：43，"name"："圆梦村剧场"，"翼"：1，"神龛"：1，"祖先"：4}，
  {"id":44,"name":"音乐大厅","wing":0,"shrine":0,"ancestor":0},
  {"id":45,"name":"雪隐峰","wing":2,"shrine":1,"ancestor":0},
  {"id":46,"name":"霞谷神殿","wing":1,"shrine":1,"ancestor":1},
  {"id":47,"name":"墓土大厅","wing":0,"shrine":1,"ancestor":0},
  {"id":48,"name":"藏宝岛礁","wing":2,"shrine":1,"ancestor":4},
  {"id":49,"name":"边陲荒漠","wing":2,"shrine":1,"ancestor":2},
  {"id":50,"name":"巨兽荒原","wing":6,"shrine":1,"ancestor":5},
  {"id":51,"name":"黑水港湾","wing":3,"shrine":1,"ancestor":2},
  {"id":52,"name":"远古战场","wing":2,"shrine":1,"ancestor":1},
  {"id":53,"name":"失落方舟","wing":2,"shrine":1,"ancestor":6},
  {"id":54,"name":"墓土神殿","wing":1,"shrine":1,"ancestor":0},
  {"id":55,"name":"禁阁一层","wing":1,"shrine":1,"ancestor":2},
  {"id":56,"name":"禁阁二层","wing":0,"shrine":0,"ancestor":1},
  {"id":57,"name":"禁阁三层","wing":1,"shrine":1,"ancestor":1},
  {"id":58,"name":"禁阁四层","wing":2,"shrine":1,"ancestor":4},
  {"id":59,"name":"禁阁五层","wing":1,"shrine":0,"ancestor":0},
  {"id":60,"name":"禁阁六层","wing":1,"shrine":1,"ancestor":0},
  {"id":61,"name":"禁阁顶层","wing":0,"shrine":0,"ancestor":0},
  {"id":62,"name":"档案阁","wing":2,"shrine":1,"ancestor":1},
  {"id":63,"name":"庇护所","wing":1,"shrine":1,"ancestor":4},
  {"id":64,"name":"伊甸（第一阶段）","wing":1,"shrine":1,"ancestor":0},
  {"id":65,"name":"伊甸（第二阶段）","wing":9,"shrine":1,"ancestor":0},
  {"id":66,"name":"暴风眼","wing":0,"shrine":1,"ancestor":0},
  {"id":67,"name":"重生之路（第一阶段）","wing":0,"shrine":0,"ancestor":0},
  {"id":68,"name":"重生之路（第二阶段）","wing":0,"shrine":0,"ancestor":0},
  {"id":69,"name":"重生之路（第三阶段）","wing":0,"shrine":1,"ancestor":0},
  {"id":70,"name":"藏星阁","wing":0,"shrine":1,"ancestor":0},
  {"id":71,"name":"月牙绿洲","wing":3,"shrine":1,"ancestor":4},
  {"id":72,"name":"星光沙漠","wing":3,"shrine":1,"ancestor":0},
  {"id":73,"name":"姆明故事书","wing":1,"shrine":1,"ancestor":0},
  {"id":74,"name":"姆明谷的森林","wing":0,"shrine":0,"ancestor":0},
  {"id":75,"name":"内心世界","wing":0,"shrine":0,"ancestor":0},
  {"id":76,"name":"群星影院","wing":0,"shrine":1,"ancestor":0},
  {"id":77,"name":"市集","wing":0,"shrine":0,"ancestor":0},
  {"id":78,"name":"秘密基地（办公室）","wing":0,"shrine":1,"ancestor":0},
  {"id":79,"name":"秘密基地（任天堂）","wing":0,"shrine":0,"ancestor":0},
  {"id":80,"name":"冥想之地","wing":0,"shrine":0,"ancestor":0},
  {"id":81,"name":"咖啡店","wing":0,"shrine":0,"ancestor":0}
];
const routes = [
  [1,[7,15,25,36,47,55,64]],
  [2,[3,4,5,6,70,80,81,7,15,25,36,47,55,64,44]],
  [3,[2]], [4,[2]], [5,[2]], [6,[2]],
  [7,[8,9,14]],
  [8,[7]],
  [9,[10,11,12,13,14,7,26]],
  [10,[9]], [11,[9]], [12,[9]], [13,[9]],
  [14,[7,15]],
  [15,[16]],
  [16,[17,19,21,15]],
  [17,[16,18,19]],
  [18,[17]],
  [19,[17,16,20,21,22]],
  [20,[24,19]],
  [21,[16,19,23]],
  [22,[20]],
  [23,[21,26]],
  [24,[20,25]],
  [25,[26,27]],
  [26,[25,33,45,53,72,9,23]],
  [27,[25,30,28]],
  [28,[27,30,31,29]],
  [29,[28,30,34]],
  [30,[27,28,29]],
  [31,[28,32,29,33]],
  [32,[]],
  [33,[31,26]],
  [34,[29,35]],
  [35,[34,36]],
  [36,[37,42]],
  [37,[38,40]],
  [38,[37,39]],
  [39,[38,41]],
  [40,[37,41]],
  [41,[42,46]],
  [42,[36,43,44,45,41]],
  [43,[44,42]],
  [44,[42,43]],
  [45,[42,26]],
  [46,[41,47]],
  [47,[46,79,48,49]],
  [48,[47]],
  [49,[50,53]],
  [50,[49,51,52]],
  [51,[50,52]],
  [52,[50,51,54]],
  [53,[49,26]],
  [54,[52,55]],
  [55,[78,70,62,63,56]],
  [56,[57]],
  [57,[58]],
  [58,[59]],
  [59,[60]],
  [60,[61]],
  [61,[64]],
  [62,[55]],
  [63,[55]],
  [64,[65]],
  [65,[64,66]],
  [66,[67]],
  [67,[68]],
  [68,[69]],
  [69,[1]],
  [70,[71,72,73,41,76,2]],
  [71,[]],
  [72,[26]],
  [73,[74,75]],
  [74,[]],
  [75,[]],
  [76,[77,70]],
  [77,[]],
  [78,[55]],
  [79,[7,15,25,36,47,55,64]],
  [80,[2]],
  [81,[2]]
];
/* 合并 points */
points.push(...points2);
/* 构建邻接表：仅单向，不自动补双向 */
const adj = {};
points.forEach(p => adj[p.id] = new Set());
routes.forEach(([from, list]) => list.forEach(to => adj[from].add(to)));
/* 全局单向回程：所有点 → 01、02 */
points.forEach(p => { adj[p.id].add(1); adj[p.id].add(2); });
/* ====== 运行逻辑 ====== */
let current = 1;
const historyStack = [current];
function loadPoint(id) {
  current = id;
  const p = points.find(p => p.id === id);
  document.getElementById('map').style.backgroundImage = `url(img/${String(id).padStart(2,'0')}.jpg)`;
  document.getElementById('info-title').textContent = p.name;
  document.getElementById('info-stats').textContent = `光翼: ${p.wing} | 神龛: ${p.shrine} | 先祖: ${p.ancestor}`;
  const list = document.getElementById('info-list');
  list.innerHTML = '';
  Array.from(adj[id]).sort((a,b)=>a-b).forEach(next => {
    const li = document.createElement('li');
    const target = points.find(p => p.id === next);
    li.innerHTML = `<button onclick="go(${next})">${target.name}</button>`;
    list.appendChild(li);
  });
  document.getElementById('info').classList.add('show');
}
function go(id) {
  historyStack.push(current);
  loadPoint(id);
}
document.getElementById('back').addEventListener('click', () => {
  if (historyStack.length > 1) {
    historyStack.pop();
    loadPoint(historyStack[historyStack.length-1]);
  }
});
loadPoint(current);
</script>
</body>
</html>

